{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/blockchain_project/src/components/Grosir/Batch/DaftarBatch.js\";\nimport { Fragment, Component } from \"react\";\nimport DaftarBatchForm from \"./DaftarBatchForm\";\nimport UserService from \"../../../services/user.service\";\nimport showResults from \"../../showResults/showResults\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class DaftarBatch extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onFileChange = file => {\n      this.setState({\n        imageFile: file\n      });\n    };\n\n    this.onCertificateChange = file => {\n      this.setState({\n        certificateFile: file\n      });\n    };\n\n    this.wait = ms => {\n      var start = new Date().getTime();\n      var end = start;\n\n      while (end < start + ms) {\n        end = new Date().getTime();\n      }\n    };\n\n    this.handleSubmit = values => {\n      const formData = new FormData();\n      const batchID = this.handleIDBatch();\n      formData.append(\"batch_id\", batchID);\n\n      if (values.biji_id != undefined && values.jenis_id != undefined && values.biji_id != undefined && values.jenis_id != undefined && values.proses_id != undefined && values.supplier_id != undefined && values.tgl_panen != undefined && values.volume != undefined && //Form Baru\n      values.moisture != undefined && values.videoCulture != undefined && values.storytelling != undefined && this.state.imageFile != \"\" && this.state.certificateFile != \"\") {\n        formData.append(\"biji_id\", values.biji_id);\n        formData.append(\"jenis_id\", values.jenis_id);\n        formData.append(\"proses_id\", values.proses_id);\n        formData.append(\"supplier_id\", values.supplier_id);\n        formData.append(\"tgl_panen\", values.tgl_panen);\n        formData.append(\"volume\", values.volume); //Form Baru\n\n        formData.append(\"moisture\", values.moisture);\n        formData.append(\"video_culture\", values.videoCulture);\n        formData.append(\"storytelling\", values.storytelling);\n\n        for (let i = 0; i < this.state.imageFile.length; i++) {\n          formData.append(\"files[]\", this.state.imageFile[i]);\n        }\n\n        for (let i = 0; i < this.state.certificateFile.length; i++) {\n          formData.append(\"certificate[]\", this.state.certificateFile[i]);\n        }\n\n        UserService.addBatch(formData).then(showResults(\"Data has been added\"));\n        this.wait(5000);\n        window.location.reload();\n      } else {\n        showResults(\"Please fill all the fields\");\n      }\n    };\n\n    this.handleIDBatch = () => {\n      var date = new Date().getDate();\n      var month = new Date().getMonth() + 1;\n      var year = new Date().getFullYear().toString().substr(-2);\n\n      if (date < 10) {\n        date = \"0\" + date;\n      }\n\n      if (month < 10) {\n        month = \"0\" + month;\n      }\n\n      let increment = 1;\n      let incrementalResultIDBatch = \"0\" + increment;\n      let resultIDBatch = \"\" + year + month + incrementalResultIDBatch;\n\n      for (let i = 0; i < this.state.content.length; i++) {\n        if (this.state.content[i].batch_id == resultIDBatch) {\n          increment += 1;\n\n          if (increment < 10) {\n            incrementalResultIDBatch = \"0\" + increment;\n          } else {\n            incrementalResultIDBatch = increment;\n          }\n\n          resultIDBatch = \"\" + year + month + incrementalResultIDBatch;\n        }\n      }\n\n      return resultIDBatch;\n    };\n\n    this.state = {\n      imageFile: \"\",\n      certificateFile: \"\",\n      content: []\n    };\n  }\n\n  componentDidMount() {\n    UserService.getListBatchAsc().then(response => {\n      this.setState({\n        content: response.data.batch\n      });\n    });\n  }\n\n  render() {\n    this.handleIDBatch();\n    return /*#__PURE__*/_jsxDEV(Fragment, {\n      children: /*#__PURE__*/_jsxDEV(DaftarBatchForm, {\n        onSubmit: this.handleSubmit,\n        onSelectImage: this.onFileChange,\n        onSelectCertificate: this.onCertificateChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Applications/MAMP/htdocs/blockchain_project/src/components/Grosir/Batch/DaftarBatch.js"],"names":["Fragment","Component","DaftarBatchForm","UserService","showResults","DaftarBatch","constructor","props","onFileChange","file","setState","imageFile","onCertificateChange","certificateFile","wait","ms","start","Date","getTime","end","handleSubmit","values","formData","FormData","batchID","handleIDBatch","append","biji_id","undefined","jenis_id","proses_id","supplier_id","tgl_panen","volume","moisture","videoCulture","storytelling","state","i","length","addBatch","then","window","location","reload","date","getDate","month","getMonth","year","getFullYear","toString","substr","increment","incrementalResultIDBatch","resultIDBatch","content","batch_id","componentDidMount","getListBatchAsc","response","data","batch","render"],"mappings":"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","sourcesContent":["import { Fragment, Component } from \"react\";\nimport DaftarBatchForm from \"./DaftarBatchForm\";\nimport UserService from \"../../../services/user.service\";\nimport showResults from \"../../showResults/showResults\";\n\nexport default class DaftarBatch extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      imageFile: \"\",\n      certificateFile: \"\",\n      content: [],\n    };\n  }\n\n  componentDidMount() {\n    UserService.getListBatchAsc().then((response) => {\n      this.setState({\n        content: response.data.batch,\n      });\n    });\n  }\n\n  onFileChange = (file) => {\n    this.setState({\n      imageFile: file,\n    });\n  };\n\n  onCertificateChange = (file) => {\n    this.setState({\n      certificateFile: file,\n    });\n  };\n\n  wait = (ms) => {\n    var start = new Date().getTime();\n    var end = start;\n    while(end < start + ms) {\n      end = new Date().getTime();\n   }\n }\n  \n\n  handleSubmit = (values) => {\n    const formData = new FormData();\n    const batchID = this.handleIDBatch();\n    formData.append(\"batch_id\", batchID);\n\n    if (\n      values.biji_id != undefined &&\n      values.jenis_id != undefined &&\n      values.biji_id != undefined &&\n      values.jenis_id != undefined &&\n      values.proses_id != undefined &&\n      values.supplier_id != undefined &&\n      values.tgl_panen != undefined &&\n      values.volume != undefined &&\n\n      //Form Baru\n      values.moisture != undefined &&\n      values.videoCulture != undefined &&\n      values.storytelling != undefined &&\n      \n      this.state.imageFile != \"\" &&\n      this.state.certificateFile != \"\"\n    ) {\n      formData.append(\"biji_id\", values.biji_id);\n      formData.append(\"jenis_id\", values.jenis_id);\n      formData.append(\"proses_id\", values.proses_id);\n      formData.append(\"supplier_id\", values.supplier_id);\n      formData.append(\"tgl_panen\", values.tgl_panen);\n      formData.append(\"volume\", values.volume);\n\n      //Form Baru\n      formData.append(\"moisture\", values.moisture);\n      formData.append(\"video_culture\", values.videoCulture);\n      formData.append(\"storytelling\", values.storytelling);\n\n      for (let i = 0; i < this.state.imageFile.length; i++) {\n        formData.append(\"files[]\", this.state.imageFile[i]);\n      }\n\n      for (let i = 0; i < this.state.certificateFile.length; i++) {\n        formData.append(\"certificate[]\", this.state.certificateFile[i]);\n      }\n\n      UserService.addBatch(formData).then(showResults(\"Data has been added\"));\n\n       this.wait(5000);\n      window.location.reload();\n    } else {\n      showResults(\"Please fill all the fields\");\n    }\n  };\n\n  handleIDBatch = () => {\n    var date = new Date().getDate();\n    var month = new Date().getMonth() + 1;\n    var year = new Date().getFullYear().toString().substr(-2);\n\n    if (date < 10) {\n      date = \"0\" + date;\n    }\n    if (month < 10) {\n      month = \"0\" + month;\n    }\n\n    let increment = 1;\n    let incrementalResultIDBatch = \"0\" + increment;\n    let resultIDBatch = \"\" + year + month + incrementalResultIDBatch;\n\n    for (let i = 0; i < this.state.content.length; i++) {\n      if (this.state.content[i].batch_id == resultIDBatch) {\n        increment += 1;\n        if (increment < 10) {\n          incrementalResultIDBatch = \"0\" + increment;\n        }\n        else {\n          incrementalResultIDBatch = increment;\n        }\n        resultIDBatch = \"\" + year + month + incrementalResultIDBatch;\n      }\n    }\n\n    return resultIDBatch;\n  };\n\n  render() {\n    this.handleIDBatch();\n    return (\n      <Fragment>\n        <DaftarBatchForm\n          onSubmit={this.handleSubmit}\n          onSelectImage={this.onFileChange}\n          onSelectCertificate={this.onCertificateChange}\n        />\n      </Fragment>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}